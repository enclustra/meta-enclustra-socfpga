// SPDX-License-Identifier: GPL-2.0+
/*
 * Copyright (C) 2015 Altera Corporation <www.altera.com>
 */
#include "socfpga_arria10.dtsi"

/ {
	model = "Altera SOCFPGA Arria 10";
	compatible = "altr,socfpga-arria10", "altr,socfpga";

	aliases {
		ethernet0 = &gmac1;
		ethernet1 = &gmac2;
		serial0 = &uart1;
	};

	chosen {
		bootargs = "earlyprintk";
		stdout-path = "serial0:115200n8";
	};

	memory@0 {
		name = "memory";
		device_type = "memory";
		reg = <0x0 0x80000000>; /* 2GB */
	};

	soc {
		clkmgr@ffd04000 {
			clocks {
				osc1 {
					clock-frequency = <33000000>;
				};
			};
		};
	};

	amba_pl@0 {
		#address-cells = <0x1>;
		#size-cells = <0x1>;
		compatible = "simple-bus";
		ranges;

		sgmii_1_gmii_to_sgmii_converter: phy@ff240000 {
			compatible = "altr,gmii-to-sgmii-2.0";
			reg = <0xff240000 0x00000008>, <0xff250000 0x00000040>;
			reg-names = "gmii_to_sgmii_adapter_avalon_slave", "eth_tse_control_port";
			clocks = <&sgmii_1_sgmii_clk &gmac1 1 &sgmii_1_clk_125 &sgmii_1_clk_125>;
			clock-names = "clock_in", "emac_gtx_clk", "tse_pcs_ref_clk_clock_connection", "tse_rx_cdr_refclk";
		};

		sgmii_2_gmii_to_sgmii_converter: phy@ff270000 {
			compatible = "altr,gmii-to-sgmii-2.0";
			reg = <0xff270000 0x00000008>, <0xff280000 0x00000040>;
			reg-names = "gmii_to_sgmii_adapter_avalon_slave", "eth_tse_control_port";
			clocks = <&sgmii_2_sgmii_clk &gmac2 1 &sgmii_2_clk_125 &sgmii_2_clk_125>;
			clock-names = "clock_in", "emac_gtx_clk", "tse_pcs_ref_clk_clock_connection", "tse_rx_cdr_refclk";
		};
	};

	clocks {
		#address-cells = <1>;
		#size-cells = <1>;

		sgmii_1_clk_125: sgmii_1_clk_125 {
			compatible = "fixed-clock";
			#clock-cells = <0>;
			clock-frequency = <125000000>;	/* 100.00 MHz */
			clock-output-names = "sgmii_1_clk_125-out_clk";
		};

		sgmii_1_sgmii_clk: sgmii_1_sgmii_clk {
			compatible = "fixed-clock";
			#clock-cells = <0>;
			clock-frequency = <100000000>;	/* 100.00 MHz */
			clock-output-names = "sgmii_1_sgmii_clk-out_clk";
		};

		sgmii_2_clk_125: sgmii_2_clk_125 {
			compatible = "fixed-clock";
			#clock-cells = <0>;
			clock-frequency = <125000000>;	/* 100.00 MHz */
			clock-output-names = "sgmii_2_clk_125-out_clk";
		};

		sgmii_2_sgmii_clk: sgmii_2_sgmii_clk {
			compatible = "fixed-clock";
			#clock-cells = <0>;
			clock-frequency = <100000000>;	/* 100.00 MHz */
			clock-output-names = "sgmii_2_sgmii_clk-out_clk";
		};

	};
};


&i2c1 {
	status = "okay";
};

&qspi {
	status = "disabled";
};

&gmac0 {
	status = "disabled";
};

&gmac1 {
	status = "disabled";
	phy-mode = "sgmii";
	phy-addr = <0>;

	altr,gmii-to-sgmii-converter = <&sgmii_1_gmii_to_sgmii_converter>;
};

&gmac2 {
	status = "okay";
	phy-mode = "sgmii";
	phy-addr = <3>;

	altr,gmii-to-sgmii-converter = <&sgmii_2_gmii_to_sgmii_converter>;
};

&uart1 {
	status = "okay";
};

&watchdog1 {
	status = "okay";
};
