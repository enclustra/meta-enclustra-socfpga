From 76b88602116e2ee2f0b2ce68f91e2852509ded08 Mon Sep 17 00:00:00 2001
From: Lothar Rubusch <lothar.rubusch@enclustra.com>
Date: Fri, 24 Nov 2023 10:49:46 +0000
Subject: [PATCH 8/8] Rest: Remaining u-boot changesets

Signed-off-by: Andreas Buerki <andreas.buerki@enclustra.com>
Signed-off-by: Lothar Rubusch <lothar.rubusch@enclustra.com>
---
 arch/arm/Kconfig                       |  1 -
 include/configs/socfpga_soc64_common.h | 10 ++++++++++
 2 files changed, 10 insertions(+), 1 deletion(-)

diff --git a/arch/arm/Kconfig b/arch/arm/Kconfig
index 1cf0e0938d..28e57b7ca3 100644
--- a/arch/arm/Kconfig
+++ b/arch/arm/Kconfig
@@ -28,7 +28,6 @@ config COUNTER_FREQUENCY
 			ROCKCHIP_RK3288 || ROCKCHIP_RK322X || ROCKCHIP_RK3036
 	default 25000000 if ARCH_LX2160A || ARCH_LX2162A || ARCH_LS1088A
 	default 100000000 if ARCH_ZYNQMP
-	default 400000000 if ARCH_SOCFPGA && ARM64
 	default 0
 	help
 	  For platforms with ARMv8-A and ARMv7-A which features a system
diff --git a/include/configs/socfpga_soc64_common.h b/include/configs/socfpga_soc64_common.h
index fb2a735750..f6562617f6 100644
--- a/include/configs/socfpga_soc64_common.h
+++ b/include/configs/socfpga_soc64_common.h
@@ -286,6 +286,16 @@
 #define CONFIG_SYS_NS16550_CLK		100000000
 #define CONFIG_SYS_NS16550_MEM32
 
+/*
+=======
+ * Timer & watchdog configurations
+ */
+#if IS_ENABLED(CONFIG_TARGET_SOCFPGA_AGILEX5_SIMICS)
+#define COUNTER_FREQUENCY		80000000
+#else
+#define COUNTER_FREQUENCY		400000000
+#endif
+
 /*
  * SDMMC configurations
  */
-- 
2.34.1

