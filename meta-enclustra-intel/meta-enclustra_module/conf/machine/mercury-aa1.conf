#@TYPE: Machine
#@NAME: Intel SoCFPGA Arria10
#@DESCRIPTION: Machine configuration for the Arria 10 SoCFPGA

require conf/machine/include/socfpga.inc

SPL_BINARY = "spl/u-boot-splx4.sfp"
UBOOT_BINARY = "u-boot.img"

UBOOT_CONFIG ??= "mercury-aa1-sd"
UBOOT_CONFIG[mercury-aa1-qspi] = "mercury-aa1-qspi_defconfig"
UBOOT_CONFIG[mercury-aa1-sd] = "mercury-aa1-sd_defconfig"

KERNEL_IMAGETYPE = "uImage"
KERNEL_EXTRA_ARGS += "LOADADDR=0x8000"

IMAGE_FSTYPES = "cpio.gz.u-boot wic.bmap tar.gz"

EXTRA_IMAGEDEPENDS += "\
	device-tree \
	u-boot-socfpga \
	u-boot-socfpga-env \
	u-boot-socfpga-scr \
	hw-ref-design \
	"

IMAGE_BOOT_FILES ?= " \
	devicetree.dtb \
	boot-sd.scr \
	uboot.env \
	fit_spl_fpga.itb \
	${UBOOT_BINARY} \
	${KERNEL_IMAGETYPE} \
	"

WKS_FILE ?= "sdimage-arria10.wks"
IMAGE_FSTYPES:append = " wic"

SERIAL_CONSOLES ?= "115200;ttyS0"
